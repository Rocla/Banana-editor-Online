<!DOCTYPE html>
<HTML><HEAD><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <TITLE>Test of the Real-time Banana Editor</TITLE>
    <style type="text/css">
        .data {
            float:left;
            width:50%;
        }

        .code {
            float:right;
            width:50%;
        }
    </style>
    <script type="text/javascript" src="/libs/jquery/js/jquery-1.11.3.js"></script>

    <SCRIPT type="text/javascript">

        var editboxHTMLnot =
                '<html class="expand close">' +
                '<head>' +
                '<style type="text/css">' +
                '.expand { width: 100%; height: 100%; }' +
                '.close { border: none; margin: 0px; padding: 0px; }' +
                'html,body { overflow: hidden; }' +
                '<\/style>' +
                '<\/head>' +
                '<body class="expand close" onload="document.f.ta.focus(); document.f.ta.select();">' +
                '<form class="expand close" name="f">' +
                '<div>hello<\/div>' +
                '<textarea class="expand close" style="background: #d7f6d0;" name="ta" id="ta" wrap="hard" spellcheck="false">' +
                '<\/textarea>' +
                '<\/form>' +
                '<\/body>' +
                '<\/html>';

        //  http://www.color-hex.com
        var editboxHTML =
                '<html class="expand close">' +
                '<head>' +
                '<style type="text/css">' +
                '.expand { width: 100%; height: 100%; }' +
                '.close { border: none; margin: 0px; padding: 0px; }' +
                'html,body { overflow: hidden; }' +
                '.note { text-size:xx-small; text-align:right;color:#000000;} ' +
                '.data { float:left; width:50%; height:100%;background-color:#d7f6d0;}' +
                '.code { float:right; width:50%; height:100%;background-color:#c6e2ff;}' +
                '<\/style>' +
                '<\/head>' +
                '<body class="expand close" onload="document.f.ta.focus(); document.f.ta.select();">' +
                '<form class="expand close" name="f">' +
                '<span class="data">' +
                '<textarea style="width:100%" id="tData" name="tData" wrap="hard" class="data">' +
                '<div id="belloWorld"> \r\n' +
                '<\/div>\r\n ' +
                '<button onClick="bello()">Bello Click</button>\r\n' +
                '<\/textarea>' +
                '<\/span>' +
                '<span class="code">' +
                '<textarea style="width:100%" id="ta" name="ta" wrap="hard" class="code" spellcheck="false">' +
                '<\/textarea>' +
                '<\/span>' +
                '<\/form>' +
                '<\/body>' +
                '<\/html>';


        var defaultStuff = 'function bello() {\r\n' +
                'document.getElementById("belloWorld").innerHTML = "Bello World!";\r\n' +
                '}';


        var old = '';

        function init()
        {
            window.editbox.document.write(editboxHTML);
            window.editbox.document.close();
            window.editbox.document.f.ta.value = defaultStuff;

            update();
        }

        var i = 0;

        function update()
        {
            var scriptText = window.editbox.document.f.ta;
            if (i == 2) {
                alert(scriptText.value); // (useful for debugging)
                i ++;
            }

            var dataText = window.editbox.document.f.tData;
            var d = dynamicframe.document;
            //alert(textarea.value); // (useful for debugging)
            var newText;
            newText = buildText(dataText.value, scriptText.value);
            //alert(newText); // (useful for debugging)
            if (old != newText) {
                old = newText;
                d.open();
                d.write(old);
                d.close();
            }
            if (i == 1) {
                alert(newText); // (useful for debugging)
                i ++;
            }
            window.setTimeout(update, 150);
        }

        function buildText(htmlBody, javaScriptBody) {
            //jQueryFile = 'file:///C:/Users/Leon/Documents/JQueryPad/JQuery.js';
            jQueryFile = '/libs/jquery/js/jquery-1.11.3.js';
            var result;
            result =  '<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> \r\n ' +
                    '<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"> \r\n ' +
                    '	<head> \r\n ' +
                    '		<meta http-equiv="content-type" content="text/html; charset=utf-8" \/>\r\n ' +
                    '		<title>jQueryPad Preview<\/title>\r\n ' +
                    '		<script type="text/javascript" src="' + jQueryFile + '"><\/script>\r\n ' +
                    '		<style type="text/css">\r\n ' +
                    '		body \r\n' +
                    '		{ \r\n' +
                    '		    font-family: Segoe UI; ' +
                    '		    font-size: 10pt; ' +
                    '		    background: white; ' +
                    '		} \r\n' +
                    '		<\/style> \r\n \r\n' +
                    '		<script type="text/javascript"> \r\n' +
                    javaScriptBody + '\r\n' +
                    '       <\/script> \r\n' +
                    '    <\/head> \r\n ' +
                    '	<body> \r\n ' +
                    htmlBody + '\r\n' +
                    '    <\/body> \r\n' +
                    '<\/html>';
            return result;
        }
    </SCRIPT>
</HEAD>

<FRAMESET resizable="yes" rows="33%,*" onload="javascript:init();">
    <!-- about:blank confuses opera, so use javascript: URLs instead -->
    <FRAME id="editbox" name="editbox" src="javascript:'';">
    <FRAME id="dynamicframe" name="dynamicframe" src="javascript:'';">
</FRAMESET>

</HTML>

