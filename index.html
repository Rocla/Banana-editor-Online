<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Hello Banana!</title>
    <!-- Load the jQuery UI CSS -->
    <link rel="stylesheet" href="libs/jquery-ui/css/jquery-ui.css" type="text/css"/>

    <!-- Load jQuery first before jQuery UI! -->
    <!-- <script src="libs/jquery/js/jquery-1.11.3.min.js"></script> -->
    <script src="libs/jquery/js/jquery-2.1.4.js"></script>
    <script src="libs/jquery-ui/js/jquery-ui-1.11.4.min.js"></script>

    <script>
        var _init = $.ui.dialog.prototype._init;
        $.ui.dialog.prototype._init = function () {
            _init.apply(this, arguments);

            var dialog_element = this;
            var dialog_id = this.uiDialogTitlebar.next().attr('id');

            this.uiDialogTitlebar.append('<a href="#" id="' + dialog_id +
                    '-minbutton" class="ui-dialog-titlebar-minimize ui-corner-all">' +
                    '<span class="ui-icon ui-icon-minusthick"></span></a>');

            $('#dialog_window_minimized_container').append(
                    '<div class="dialog_window_minimized ui-widget ui-state-default ui-corner-all" id="' +
                    dialog_id + '_minimized">' + this.uiDialogTitlebar.find('.ui-dialog-title').text() +
                    '<span class="ui-icon ui-icon-newwin"></div>');

            $('#' + dialog_id + '-minbutton').hover(function () {
                $(this).addClass('ui-state-hover');
            }, function () {
                $(this).removeClass('ui-state-hover');
            }).click(function () {
                dialog_element.close();
                $('#' + dialog_id + '_minimized').show();
            });

            $('#' + dialog_id + '_minimized').click(function () {
                $(this).hide();
                dialog_element.open();
            });
        };
    </script>

    <script>
        $(document).ready(function () {
            $('#create_button').button().click(function () {
                var create_dialog = $('#dialog_window_1');
                var create_button = $(this);
                if (create_dialog.dialog('isOpen')) {
                    create_button.button('option', 'label', 'Open the Window generator');
                    create_dialog.dialog('close');
                } else {
                    create_button.button('option', 'label', 'Close the Window generator');
                    create_dialog.dialog('open');
                }
            });

            $('#create_window').button().click(function () {
                var div_count = $('.dialog_window').length + 1;
                var div_id = 'dialog_window_' + div_count;
                var div_title = "helloworld(" + div_count.toString() + ")";
                var div_content = $('#new_window_content').val();


                $('body').append('<div class="dialog_window" id="' + div_id + '">' + div_content + '</div>');

                var dialog = $('#' + div_id).dialog({
                    width: 'auto',
                    height: 'auto',
                    title: div_title,
                    autoOpen: true
                });
            });

            $('#dialog_window_1').dialog({
                width: 'auto',
                height: 'auto',
                autoOpen: false,
                buttons: [
                    {
                        text: 'Create',
                        click: function () {
                            var div_count = $('.dialog_window').length + 1;
                            var div_id = 'dialog_window_' + div_count;
                            var div_title = $('#new_window_title').val();
                            var div_content = $('#new_window_content').val();
                            var buttons = new Array();
                            if ($('#alertbutton').is(':checked')) {
                                buttons.push({
                                    text: 'ALERT',
                                    click: function () {
                                        alert('ALERTING from Dialog Window: ' + div_title);
                                    }
                                });
                            }

                            if ($('#closebutton').is(':checked')) {
                                buttons.push({
                                    text: 'CLOSE',
                                    click: function () {
                                        $('#' + div_id).dialog('close');
                                    }
                                });
                            }

                            $('body').append('<div class="dialog_window" id="' + div_id + '">' + div_content + '</div>');

                            var dialog = $('#' + div_id).dialog({
                                width: 'auto',
                                height: 'auto',
                                title: div_title,
                                autoOpen: true,
                                buttons: buttons
                            });
                        }
                    }
                ]
            });

            $('#buttonlist').buttonset();
        });
    </script>

    <style>
        .dialog_form th {
            text-align: left;
        }

        .dialog_form textarea, .dialog_form input[type=text] {
            width: 320px;
        }

        #dialog_window_minimized_container {
            position: fixed;
            bottom: 0px;
            left: 0px;
        }

        .dialog_window_minimized {
            float: left;
            padding: 5px 10px;
            font-size: 12px;
            cursor: pointer;
            margin-right: 2px;
            display: none;
        }

        .dialog_window_minimized .ui-icon {
            display: inline-block !important;
            position: relative;
            top: 3px;
            cursor: pointer;
        }

        .ui-dialog .ui-dialog-titlebar-minimize {
            height: 18px;
            width: 19px;
            padding: 1px;
            position: absolute;
            right: 23px;
            top: 9px;
        }

        .ui-dialog .ui-dialog-titlebar-minimize .ui-icon {
            display: block;
            margin: 1px;
        }

        .ui-dialog .ui-dialog-titlebar-minimize:hover, .ui-dialog .ui-dialog-titlebar-minimize:focus {
            padding: 0;
        }
    </style>

</head>

<body>

<h2>This is my Hello Banana!</h2>

<div id="dialog_window_minimized_container"></div>
<div id="dialog_window_1" class="dialog_window" title="Window Generator">
    <h3>Window Generator</h3>
    <table class="dialog_form">
        <tr>
            <th>Window Title</th>
        </tr>
        <tr>
            <td><input type="text" id="new_window_title" /></td>
        </tr>
        <tr>
            <th>
                Window Content
            </th>
        </tr>
        <tr>
            <td>
                <textarea id="new_window_content"></textarea>
            </td>
        </tr>
        <tr>
            <th>
                Window Buttons
            </th>
        </tr>
        <tr>
            <td id="buttonlist">
                <input type="checkbox" id="alertbutton" /><label for="alertbutton">ALERT</label>
                <input type="checkbox" id="closebutton" /><label for="closebutton">CLOSE</label>
            </td>
        </tr>
    </table>
</div>
<button id="create_button">Open the Window generator</button>
<button id="create_window">Create an empty Window</button>

<br/><br/>

Please check out the <a href="https://github.com/Rocla/banana-editor-online">README on the Github repository</a> :)

<br/><br/>
License:
<br/><br/>
<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons License"
                                                                               style="border-width:0"
                                                                               src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"/></a><br/><span
        xmlns:dct="http://purl.org/dc/terms/" property="dct:title">Banana Editor Online</span> by <a
        xmlns:cc="http://creativecommons.org/ns#" href="http://www.romainclaret.com" property="cc:attributionName"
        rel="cc:attributionURL">Romain Claret</a> is licensed under a <a rel="license"
                                                                         href="http://creativecommons.org/licenses/by-nc-sa/4.0/">Creative
    Commons Attribution-NonCommercial-ShareAlike 4.0 International License</a>.

</body>

</html>
